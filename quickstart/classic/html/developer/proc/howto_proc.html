<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Compile and Run Pro*C Sample Programs</title>

<link type="text/css" rel="stylesheet" href="../../css/qs.css">
<script type="text/javascript" src="../../css/qsfuncs.js"></script>
</head>
<body onload="javascript:qsInit2();">
<div id="toppane"></div>
<div id="leftpane"></div>
<div id="content">


<span class="PageTitle-navy">Compile and Run Pro*C Sample Programs</span>
<p class="normal"><span class="section1"><br />
IMPORTANT PRE-REQUISITES</span> </p>
<blockquote>
<p class="normal-bold">1. <a href="../sample_dsn_setup.html">Manually Configure Sample DSN for Sample Programs</a> </span></p>
 <p class="normal-bold">2. Set up sample database and user accounts</p>
  <p class="normal">The following build_sampledb script should be run once to set up the sample database and user accounts </p>
  <table width="700" border="0">
      <tr>
        <td colspan="2" valign="top" >
        <li> Set up the Instance Environment Variables<br />
e.g. If your TimesTen instance location is under <span class="codetext">/home/timesten/instance/tt181</span> directory, execute the command
<br/><br />
<span class="codetext">$ source /home/timesten/instance/tt181/bin/ttenv.sh </span></li>
<br />
        <li>Run the <span class="codetext">quickstart/classic/sample_scripts/createdb/build_sampledb</span> script, which creates the sample database and user accounts that are used by the sample programs. This script  creates the TimesTen user accounts and prompts you for the desired user passwords.</li></td>
      </tr>
  </table>
  <br />
  <table width="608" border="0">
    
    <tr>
      <td valign="top" class="normal">Unix/Linux:</td>
      <td class="codetext">&nbsp;</td>
      <td class="codetext">$ cd quickstart/classic/sample_scripts/createdb<br />
        $
        ./build_sampledb.sh</td>
    </tr>
  </table>
   <p class="normal-bold">3. Set up  environment to compile and run the sample application</p>
  <p class="normal">The following script must be run for each of the terminal session:</p>
    <li><p class="normal">Set up the Instance environment variables:<br />
e.g. If your TimesTen instance location is under <span class="codetext">/home/timesten/instance/tt181</span> directory, execute the command
<br/><br />
<span class="codetext">$ source /home/timesten/instance/tt181/bin/ttenv.sh </span></p></li>
 
  <li><p class="normal">Set up quickstart environment variables:</p> 
  <table width="606" border="0">
  
    <tr>
      <td valign="top" class="normal">Unix/Linux:</td>
      <td class="codetext">&nbsp;</td>
      <td class="codetext">$ . quickstart/classic/ttquickstartenv.sh <span class="normal-bold">OR</span><br />
        $ source 
        quickstart/classic/ttquickstartenv.csh</td>
    </tr>
  </table>
  </li>
</blockquote>
<p class="normal"><span class="section1">How to compile the sample Pro*C programs</span></p>
<p class="normal">To compile the sample programs in the sample_code/proc directory, you simply run the makefile supplied in the same directory. Note that the appropriate makefile is made available based on the platform of your TimesTen installation. </p>
<p class="normal">Firstly, select the platform specific Makefile and copy from <span class="codetext">quickstart/classic/sample_code/proc/makefiles</span> to the upper level directory.

<br/><br/>
For example, if your platform is Linux x86-64bit, execute the following commands:<br/><br/>
<span class="codetext">cd quickstart/classic/sample_code/proc/makefiles</span><br/>
<span class="codetext">cp Makefile.linux8664.proto ../Makefile</span><br/>
<span class="codetext">cd ..</span><br/>
</p>

<p><span class="normal">To build a sample program in the sample_code/proc directory, use the following command:</span></p>
<table width="806" border="0">
 
  <tr>
    <td class="normal"></td>
    <td class="normal">[Linux/Unix]</td>
     <td class="codetext">$ make &lt;program-name&gt;</td>
  </tr>
  <tr>
    <td class="normal"></td>
    <td colspan="2" class="normal">where &lt;program-name&gt; is the program you want to compile.</td>
  </tr>
</table>
<p class="normal">For example, to compile the ansidyn1 program, you do:</p>
<table width="540" border="0">
 
  <tr>
    <td class="normal"></td>
    <td class="normal">[Linux/Unix]</td>
    <td class="codetext">$ make ansidyn1</td>
  </tr>
</table>
 
<p class="section1"><br />
How to run the sample Pro*C program</p>
<p class="normal"></p>
<table width="800" border="1">
  <tr>
    <td width="121" height="114" valign="top" class="normal">&nbsp; <strong>addempPROC</strong></td>
    <td width="608" valign="top" class="normal">This Pro*C sample program prompts the user for information and inserts the corresponding data as a new employee into the EMP table.<br />
        <br />
      This program is based on the Oracle Pro*C sample.pc program and minimal error checking is performed on the data to be inserted.<br />
      <br />
      The <span class="codetext">EMP</span> table needs to exist for this program to work. </td>
  </tr>
</table>
<p class="normal"> &nbsp; Example:</p>
<p>&nbsp;&nbsp;(run the program using the default user appuser and the default TNS Service Name sampledb, will prompt for the password)</p>
<p>&nbsp;&nbsp;&nbsp;<span class="codetext"><strong>addempPROC</strong></span><br />
</p>
<p>&nbsp;&nbsp;(run the program specifying the username, password and service name)</p>
<p>&nbsp;&nbsp;&nbsp;<span class="codetext"><strong>addempPROC -user myuser -password mypassword -service myservice</strong></span><br />
</p>
<p>For full syntax of the program, try &quot;<span class="codetext">addempPROC -help</span>&quot;.</p>
<p class="normal"></p>
<table width="800" border="1">
  <tr>
    <td width="121" height="62" valign="top" class="normal">&nbsp; <strong>ansidyn1</strong></td>
    <td width="608" valign="top" class="normal">ansidyn1.pc is an Oracle Pro*C program that implements a dynamic  SQL interpreter. Using the ANSI embedded SQL  syntax, ansidyn1.pc accepts dynamic SQL at the input command prompt (SQL&gt;)</p>
      <p>You are prompted for the username and password at runtime. The ‘servicename’ can be either an entry in the TNSnames.ora file  or an easy connect  string.</p>
    <p>No existing tables need to exist for this program to work.</td>
  </tr>
</table>
<p class="normal"> &nbsp; Example:</p>
<p class="normal">&nbsp;&nbsp;(Run the program using either a TNS Service Name or Easy Connect String.  For a TNS Service Name enter <span class="codetext">sampledb</span>. For an Easy Connect string, enter <span class="codetext">localhost/sampledb:timesten_direct</span>)<br />
  <br />
  <strong class="codetext"><em>&nbsp;<span class="style121">&nbsp; ansidyn1<br />
  </span></em></strong><br />
</p>
<table width="800" border="1">
  <tr>
    <td width="121" height="74" valign="top" class="normal">&nbsp; <strong>batchfetchPROC</strong></td>
    <td width="608" valign="top" class="normal">This Pro*C sample program connects to the database and then declares and opens a cursor, 
      fetches in batches using arrays, and prints the results using the function print_rows(). <br />
            <br />
      The <span class="codetext">EMP</span> table needs to exist for this program to work. </td>
  </tr>
</table>
<p class="normal"> &nbsp; Example:</p>
<p>&nbsp;&nbsp;(run the program using the default user appuser and the default TNS Service Name sampledb, will prompt for the password)</p>
<p>&nbsp;&nbsp;&nbsp;<span class="codetext"><strong>batchfetchPROC</strong></span><br />
</p>
<p>&nbsp;&nbsp;(run the program specifying the username, password and service name)</p>
<p>&nbsp;&nbsp;&nbsp;<span class="codetext"><strong>batchfetchPROC -user myuser -password mypassword -service myservice</strong></span></p>
<p><br />
  For full syntax of the program, try &quot;<span class="codetext">batchfetchPROC -help</span>&quot;.</p>
<p>&nbsp;</p>
<table width="800" border="1">
  <tr>
    <td width="121" height="90" valign="top" class="normal">&nbsp; <strong>cursorPROC</strong></td>
    <td width="608" valign="top" class="normal">This Pro*C sample program connects to the database and then declares and opens a cursor. 
      The cursor fetches the names, salaries, and commissions of all salespeople, displays the results, then closes the cursor.
      </p>
        <p>The <span class="codetext">EMP</span> table needs to exist for this program to work.</p></td>
  </tr>
</table>
<p class="normal"> &nbsp; Example:</p>
<p>&nbsp;&nbsp;(run the program using the default user appuser and the default TNS Service Name sampledb, will prompt for the password)</p>
<p>&nbsp;&nbsp;&nbsp;<span class="codetext"><strong>cursorPROC</strong></span><br />
</p>
<p>&nbsp;&nbsp;(run the program specifying the username, password and service name)</p>
<p>&nbsp;&nbsp;&nbsp;<span class="codetext"><strong>cursorPROC -user myuser -password mypassword -service myservice</strong></span></p>
<p><br />
  For full syntax of the program, try &quot;<span class="codetext">cursorPROC -help</span>&quot;.</p>
<p>&nbsp;</p>
<table width="800" border="1">
  <tr>
    <td width="121" height="114" valign="top" class="normal">&nbsp; <strong>getempPROC</strong></td>
    <td width="608" valign="top" class="normal">This Pro*C sample program prompts the user for an employee number and then:<br />
      <br />
- Queries the emp table for the employee's name, salary and commission. <br />
- Uses indicator variables (in an indicator struct) to determine if the commission is NULL.
</p>
<p>The employee numbers can be found by running the Pro*C <span class="codetext">batchfetchPROC</span> sample program or via the EMP table.</p>
<p>The <span class="codetext">EMP</span> table needs to exist for this program to work.</p></td>
  </tr>
</table>
<p class="normal"> &nbsp; Example:</p>
<p>&nbsp;&nbsp;(run the program using the default user appuser and the default TNS Service Name sampledb, will prompt for the password)</p>
<p>&nbsp;&nbsp;&nbsp;<span class="codetext"><strong>getempPROC</strong></span><br />
</p>
<p>&nbsp;&nbsp;(run the program specifying the username, password and service name)</p>
<p>&nbsp;&nbsp;&nbsp;<span class="codetext"><strong>getempPROC -user myuser -password mypassword -service myservice</strong></span><br />
</p>
<p>For full syntax of the program, try &quot;<span class="codetext">getempPROC -help</span>&quot;.<br />
</p>
<p>&nbsp;</p>
<table width="800" border="1">
  <tr>
    <td width="121" height="74" valign="top" class="normal">&nbsp; <strong>plsqlPROC</strong></td>
    <td width="608" valign="top" class="normal">This sample program uses Pro*C to access common PL/SQL packages (<span class="codetext">emp_pkg</span> and <span class="codetext">sample_pkg</span>) in four different ways:
      </p>
      <p>- Calls a stored procedure with IN and OUT parameters<br />
        - Calls a stored function with IN and OUT parameters<br />
        - Calls an anonymous block and passes host variables into and out of the block<br />
        - Calls a store procedure to open a ref cursor and uses Pro*C to process the result-set of the ref cursor <br />
  <br />
    The <span class="codetext">EMP</span> table and the <span class="codetext">emp_pkg</span> and <span class="codetext">sample_pkg</span> PL/SQL packages need to exist for this program to work.</p></td>
  </tr>
</table>
<p class="normal"> Build:<br />
  <br />
  When plsqlPROC is being built via make, the Oracle Pro*C pre-compiler will prompt for the password of the user 'appuser'.<br />
  To avoid being prompted for the password at build time, you can hard-code the password in the Makefile, but this is a security risk.<br />
  <br />
  e.g. USERID=appuser/your_password_for_appuser<br />
  <br />
  &nbsp; <br />
Example:</p>
<p>&nbsp;&nbsp;(run the program using the default user appuser and the default TNS Service Name sampledb, will prompt for the password)</p>
<p>&nbsp;&nbsp;&nbsp;<span class="codetext"><strong>plsqlPROC</strong></span><br />
</p>
<p>&nbsp;&nbsp;(run the program specifying the username, password and service name)</p>
<p>&nbsp;&nbsp;&nbsp;<span class="codetext"><strong>plsqlPROC -user myuser -password mypassword -service myservice</strong></span></p>
<p><br />
  For full syntax of the program, try &quot;<span class="codetext">plsqlPROC -help</span>&quot;.</p>
<br />
<p class="normal">&nbsp;</p>
<p class="normal">For more information on Pro*C/C++ support in TimesTen, refer to the Pro*C/C++ chapter in the <a href="http://docs.oracle.com/database/timesten-18.1/e61199/pro_c.htm#TTCDV222" target="_blank" class="doclink"><span class="doclink">Oracle TimesTen In-Memory Database C Developer's Guide</font></span>.</a><br />
</p>
<p class="normal"></p>

<p>&nbsp;</p>
</div>
<div id="footer"/>
</body>

</html>
