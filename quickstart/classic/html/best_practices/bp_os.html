<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Best Practices for Operating Systems</title>
<link type="text/css" rel="stylesheet" href="../css/qs.css">
<script type="text/javascript" src="../css/qsfuncs.js"></script>
</head>
<body onload="javascript:qsInit();">
<div id="toppane"></div>
<div id="leftpane"></div>
<div id="content">

<span class="PageTitle-navy">Best Practices for Operating Systems</span>

<p>This page contains best practice recommendations for your Operating System hosting Oracle TimesTen.</p><ul><li>Supported Operating Systems</li><li>Memory Kernel Parameters</li><li>System Wide Resource Use</li><li>MemoryLock</li><li>Semaphores</li><li>OS TCP buffer windows</li></ul><h3>Supported Operating Systems</h3><ul><li>Supported OS versions for the current release of Oracle TimesTen are found in the <a target="_blank" class="doclink" href="http://docs.oracle.com/database/timesten-18.1/e61191/toc.htm#BEIBHEIF">Oracle TimesTen In-Memory Database Release </a>notes.</li><li>The latest OS certification information for all Oracle TimesTen releases is available on My Oracle Support Certifications (<a target="_blank" class="doclink" href="http://support.oracle.com">support.oracle.com</a>).</li>
</ul><h3>Memory Kernel Parameters</h3>
<p>The required kernel parameter settings vary between Operating Systems so please refer to the <a target="_blank" class="doclink" href="http://docs.oracle.com/database/timesten-18.1/e61193/ovwreqts.htm#TTINS121">Oracle TimesTen In-Memory Database Installation Guide</a> on how to set the appropriate parameters on your platform. Below is a guide for the most commonly used  ones.</p><ul><li><em><strong>shmmax</strong> </em>- the maximum size of a shared memory segment. Needs to be large enough to accommodate the shared memory segment used for your Oracle TimesTen In-Memory database. The size of which is calculated as  <em>PermSize+TempSize+LogBuffSize+64MB</em> overhead. <br />In Linux to view your current setting of shmmax run the OS command <br />
    <span class="codetext">      $ ipcs -lm</span><br />
Refer to the <a target="_blank" class="doclink" href="http://docs.oracle.com/database/timesten-18.1/e61193/ovwreqts.htm#CBHJCEAI">Installation Guide - Shared Memory section</a> on how to set shmmax for your OS if required.<br /><br /></li>
<li><em><strong>shmall</strong> </em>- <span><span ><span >the total size of Shared Memory Segments System wide set in pages. The key thing to remember here is the value of shmmax is set in &quot;bytes&quot; but the value of shmall is set in &quot;pages&quot;. Shmall should always be less than the physical memory on the box. In </span></span>Linux<span ><span > to see what the total memory is run the following OS command </span></span></span><br />
      <span class="codetext">$ cat /proc/meminfo </span><br />
  <span><span ><span >Refer to the </span></span><a target="_blank" class="doclink" href="http://docs.oracle.com/database/timesten-18.1/e61193/ovwreqts.htm#CBHJCEAI">Installation Guide - Shared Memory section</a><span ><span > on how to set shmall for your OS if required.</span></span></span><br /><span><span ><span ><br /></span></span></span></li>
<li><span ><em><strong>Hugepages</strong> </em>- a mechanism that allows the kernel to utilise the multiple page size capabilities of modern hardware architectures. Hugepages are beneficial in two situations. </span><br />
<span >          1 - With large Oracle TimesTen databases. </span>In fact it's mandatory to use Hugepages if your database is greater than 256GB because Linux cannot fall back and use regular pages because they cannot be  backed by swap.&nbsp; When segment size is &lt;256 GB it can be swapped, but  the Linux&nbsp; limit on swap space is 256 GB.&nbsp; <br />
<span >          2 - With smaller Oracle TimesTen databases that have a large number of server processes. </span><br /><span >You need enough memory allocated  in Hugepages to accommodate your Oracle TimesTen database shared memory segment size. For Oracle TimesTen to utilise Hugepages the kernel and Oracle TimesTen must be configured correctly. Refer to the <span> </span><a target="_blank" class="doclink" href="http://docs.oracle.com/database/timesten-18.1/e61193/ovwreqts.htm#CBHJHJDF">Installation Guide - Large Pages section</a><span> on how to configure Hugepages and Oracle TimesTen for your OS if required. <!--There is also an example of setting Hugepages for the Exalytics machine here</span></span><a target="_blank" class="doclink" href=""><span ><span> </span></span><span >Best practice for Exalytics HugePages</span></a><span >.</span--></li></ul><p><span><span ><span >The above is only relevant for the Linux Operating System. For Solaris you need to create a project to manage shared memory resources as </span>explained<span > in the </span></span><span ><span > <a target="_blank" class="doclink" href="http://docs.oracle.com/database/timesten-18.1/e61193/ovwreqts.htm#TTINS146">Installation Guide - Solaris prerequisites section</a>. Other Operating Systems are discussed in the <a target="_blank" class="doclink" href="http://docs.oracle.com/database/timesten-18.1/e61193/ovwreqts.htm#TTINS127">Installation Guide - Installation prerequisites section</a>.</span></span></span></p><h3><span >System wide resource use</span></h3><ul><li><span ><em><strong>ulimit</strong> </em>- </span><span ><span >a mechanism to restrict the amount of system resources a process can consume. Your instance administrator user, the user who installed Oracle TimesTen needs to be allocated enough lockable memory resource to load and lock your Oracle TimesTen shared memory segment. </span></span><br /><span ><span >This is </span></span><span >configured</span><span ><span > with the memlock entry in the OS file <em>/etc/security/limits.conf</em> for the instance administrator. </span></span><br /><span ><span >To view the current setting run the OS command </span></span><br />
    <span class="codetext"> $ ulimit -l</span><br />
<span >and to set it to a value dynamically within the boundary set by<em> /etc/security/limits.conf </em>use </span><br />
<span class="codetext"> $ ulimit -l &lt;value&gt;</span><br /><span >Once changed you need to restart the TimesTen master daemon for the change to be picked up. </span><br />
<span class="codetext"> $ ttDaemonAdmin -restart </span></li>
</ul><p><span><span >Beware sometimes ulimit is set in the instance administrators<span > &quot;~/.bashrc&quot; or &quot;~/.bash_profile&quot; file which can </span>override what's<span > set in </span></span><span class="codetext">/etc/security/limits.conf</span></span></p>
<h3><span>MemoryLock</span></h3>
<p><span>A best practice recommendation is to use <a target="_blank" class="doclink" href="http://docs.oracle.com/database/timesten-18.1/e61204/attribute.htm#TTREF149">MemoryLock=4</a> in the DSN attributes configured in your sys.odbc.ini file. This means that the shared memory segment used for your TimesTen database is not a candidate to be paged out by the operating system, it will be locked. Please see the <a target="_blank" class="doclink" href="bp_dbsettings.html">Best Practice for Database Attributes</a> for further information on setting MemoryLock</span></p>
<h3>Semaphores</h3><p><span>The kernel must be configured with sufficient semaphores to support the expected number of database connections plus all other semaphore usage within the system.</span> <a target="_blank" class="doclink" href="http://docs.oracle.com/database/timesten-18.1/e61204/attribute.htm#TTREF140">Connections</a>, a DSN attributre in your sys.odbc.ini file indicates the maximum number of user-specified concurrent connections to the database. TimesTen allocates one semaphore for each expected connection. If the number of connections exceeds the value of this attribute, TimesTen returns an error. Refer to the <a target="_blank" class="doclink" href="http://docs.oracle.com/database/timesten-18.1/e61193/ovwreqts.htm#CBHBABHF">Installation Guide</a> on how to set the appropriate SEM semaphore parameter based on your number of connections. Please see the <a target="_blank" class="doclink" href="bp_dbsettings.html">Best Practice for Database Attributes</a> for further information on setting connections.</p>
<h3>OS TCP buffer windows</h3><p class="normal">You should have your System Administrator look into configuring larger TCP send and receive buffer windows, particularly when you are using Replication. Please see the <a target="_blank" class="doclink" href="bp_replication.html">Best practice Guide for Replication</a> for further advice in this area.</p>
<p class="normal">&nbsp;</p>
</div>
<div id="footer"/>
</body>

</html>
